config {
  path = ""
  path = ${?VALUE}

  gatling {
    core {
      runDescription = "MDS Cache"
      runDescription = ${?VALUE}
    }
  }

  feeder {
    size = 100
    size = ${?VALUE}
    useJson = false
    useJson = ${?VALUE}
  }

  wiremock {
    enabled = true
    enabled = ${?VALUE}
    scheme = "https"
    host = "wiremock-uc-mds-cache-local.dev-globalrelay.net"
    port = 443
  }

  kafka {
    brokers = "local-k8s.dev-globalrelay.net:32123"
    brokers = ${?VALUE}
    serializer = "org.apache.kafka.common.serialization.StringSerializer"
    securityProtocol = "PLAINTEXT"
    truststoreLocation = ""
    password = ""
    mdsTopic = "cp.msg-mds.local.ca.nvan.directory.changelog"
    mdsTopic = ${?VALUE}
    ucsTopic = "cp.uc-contact-service.local.ca.nvan.contact.changelog"
    ucsTopic = ${?VALUE}
  }

  metrics {
    scrapeInterval = 30
    scrapeInterval = ${?VALUE}
  }

  headerSet {

    mds {
      # those are cutting points of the size ranges and the corresponding probabilities.
      # e.g. sizes = [a, b, c] distributions = [0.2, 0.3, 0.5]. the ranges would be [(0,a),(a,b),(b,c)].Then the size
      # of header maps has 20 percent probability in [0, a], 30 percent probability in [a, b]
      # The first cutting point is 0 indicating the first range is [0,0] which represents empty evict header.
      sizes = [0, 50, 100, 1000, 2000]
      distributions = [0.90, 0.05, 0.03, 0.01, 0.01]
      wildcard {
        present = true
        present = ${?VALUE}
        rate = 0.0005
        rate = ${?VALUE}
      }
    }

    ucs {
      sizes = [0, 50, 100, 1000, 2000]
      distributions = [0.90, 0.05, 0.03, 0.01, 0.01]
      wildcard {
        present = true
        present = ${?VALUE}
        rate = 0.0005
        rate = ${?VALUE}
      }
    }
  }

  simulation {
    baseUrl = "https://local.dev-globalrelay.net:9443/mds-cache"
    baseUrl = ${?VALUE}
    apiVersion = "v1"
    apiVersion = ${?VALUE}

    loadFactor = 1
    loadFactor = ${?VALUE}

    maxConnectionPerHost = 64
    maxConnectionPerHost = ${?VALUE}

    getVersion {
      #  > hits /version endpoint once every min (100% load)
      rate = 1
      rate = ${?VALUE}
      rampDuring = 300
      rampDuring = ${?VALUE}
      during = 600
      during = ${?VALUE}
      upperBoundForResponseTime = 100
      upperBoundForResponseTime = ${?VALUE}
    }

    getUserProfile {
      rate = 600
      rate = ${?VALUE}
      rampDuring = 300
      rampDuring = ${?VALUE}
      during = 600
      during = ${?VALUE}
      # SLO can be found in https://wiki.globalrelay.net/x/sI3_Ew
      upperBoundForResponseTime = 20
      upperBoundForResponseTime = ${?VALUE}

      # Optional filename when json is used
      jsonFilename = "user-profile-perf3.json"
      jsonFilename = ${?VALUE}
    }

    getCompanyNumber {
      rate = 600
      rate = ${?VALUE}
      rampDuring = 300
      rampDuring = ${?VALUE}
      during = 600
      during = ${?VALUE}
      # SLO can be found in https://wiki.globalrelay.net/x/sI3_Ew
      upperBoundForResponseTime = 20
      upperBoundForResponseTime = ${?VALUE}

      # Optional filename when json is used
      jsonFilename = "company-number-perf3.json"
      jsonFilename = ${?VALUE}
    }

    getUserFileCapabilities {
      rate = 600
      rate = ${?VALUE}
      rampDuring = 300
      rampDuring = ${?VALUE}
      during = 600
      during = ${?VALUE}
      # SLO can be found in https://wiki.globalrelay.net/x/sI3_Ew
      upperBoundForResponseTime = 20
      upperBoundForResponseTime = ${?VALUE}

      # Optional filename when json is used
      jsonFilename = "user-file-capabilities-perf3.json"
      jsonFilename = ${?VALUE}
    }

    viewDisclaimer {
      rate = 600
      rate = ${?VALUE}
      rampDuring = 300
      rampDuring = ${?VALUE}
      during = 600
      during = ${?VALUE}
      # SLO can be found in https://wiki.globalrelay.net/x/sI3_Ew
      upperBoundForResponseTime = 20
      upperBoundForResponseTime = ${?VALUE}

      # Optional filename when json is used
      jsonFilename = "disclaimer-perf3.json"
      jsonFilename = ${?VALUE}
    }

    getUser {
      rate = 600
      rate = ${?VALUE}
      rampDuring = 300
      rampDuring = ${?VALUE}
      during = 600
      during = ${?VALUE}
      # SLO can be found in https://wiki.globalrelay.net/x/sI3_Ew
      upperBoundForResponseTime = 20
      upperBoundForResponseTime = ${?VALUE}

      # Optional filename when json is used
      jsonFilename = "user-perf3.json"
      jsonFilename = ${?VALUE}
    }

    resolveContact {
      rate = 600
      rate = ${?VALUE}
      rampDuring = 300
      rampDuring = ${?VALUE}
      during = 600
      during = ${?VALUE}
      # SLO can be found in https://wiki.globalrelay.net/x/sI3_Ew
      upperBoundForResponseTime = 20
      upperBoundForResponseTime = ${?VALUE}

      # Optional filename when json is used
      jsonFilename = "contact-perf3.json"
      jsonFilename = ${?VALUE}
    }

    multiEndpoints {
      # 600 rps / 6 endpoints
      rate = 100
      rampDuring = 300
      rampDuring = ${?VALUE}
      during = 600
      during = ${?VALUE}
      upperBoundForResponseTime = 20
      upperBoundForResponseTime = ${?VALUE}
    }

    evictHeaders {
      rate = 100
      rampDuring = 10
      rampDuring = ${?VALUE}
      during = 30
      during = ${?VALUE}
      upperBoundForResponseTime = 1000
      upperBoundForResponseTime = ${?VALUE}
    }
  }
}
